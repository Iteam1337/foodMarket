(()=>{"use strict";var e={3304:(e,t,n)=>{n.r(t),n.d(t,{default:()=>pn});var r=n(4942),a=n(2950),i=n(9526),l=n(8473),o=n(7132),s=n(1925),u=n(7973),d=n(2698);const c=JSON.parse('{"expo":{"name":"Skaff","slug":"skaff","version":"1.0.0","orientation":"portrait","icon":"./assets/icon.png","userInterfaceStyle":"light","splash":{"image":"./assets/splash.png","resizeMode":"contain","backgroundColor":"#ffffff"},"assetBundlePatterns":["**/*"],"ios":{"supportsTablet":true},"android":{"adaptiveIcon":{"foregroundImage":"./assets/adaptive-icon.png","backgroundColor":"#ffffff"}},"web":{"favicon":"./assets/favicon.png"},"runtimeVersion":{"policy":"sdkVersion"},"owner":"iteam","extra":{"eas":{"projectId":"d4f01b24-c60a-484d-ba58-27d3e465baf1"}},"updates":{"url":"https://u.expo.dev/d4f01b24-c60a-484d-ba58-27d3e465baf1"}}}');var f=n(4152),p=n(5861),g=n(885),m=n(1133),h=n(9233),j=n(477),v=n(4333),b=n(8576),x=n(3665),y=n(7796),k=n(7394),O=n(5226),S=n(4445),P=n(7154),w=n(7459),C=n(3637),T=n(7967);function D(){return F.apply(this,arguments)}function F(){return(F=(0,p.default)((function*(){var e;if(S.isDevice){var t=(yield P.getPermissionsAsync()).status,n=t;if("granted"!==t)n=(yield P.requestPermissionsAsync()).status;return"granted"!==n?void alert("Failed to get push token for push notification!"):(e=(yield w.default({projectId:c.expo.extra.eas.projectId})).data,console.log("token",e),"android"===o.default.OS&&C.default("default",{name:"default",importance:T.AndroidImportance.MAX,vibrationPattern:[0,250,250,250],lightColor:"#FF231F7C"}),e)}}))).apply(this,arguments)}var E=n(9146),R=n(7557),B=(0,i.createContext)(),L=function(e){var t=e.children,n=(0,E.default)("https://skaff-api.iteam.pub");return(0,R.jsx)(B.Provider,{value:n,children:t})},I=(0,i.createContext)(void 0);function q(e){var t=e.children,n=(0,i.useState)(null),r=(0,g.default)(n,2),a=r[0],l=r[1];return(0,R.jsx)(I.Provider,{value:{user:a,setUser:l},children:t})}function A(){var e=(0,i.useContext)(I);if(void 0===e)throw new Error("useAuthContext must be used within an AuthProvider");return e}const V=function(){var e=(0,i.useContext)(B),t=A(),n=t.user,r=t.setUser,a=(0,i.useCallback)((function(t,n){e.emit("login",{user:t,token:n},(function(e){console.log("got user from socket",e),r(e)}))}),[e,r]),l=(0,i.useCallback)((function(t){console.log("logout",t),e.emit("logout",{user:t},(function(e){console.log("got user from socket",e),r(e)}))}),[e,r]),o=(0,i.useCallback)((function(t){console.log("save",t),e.emit("editUser",t,(function(e){console.log("got updated user from socket",e),r(e)}))}),[e,r]);return{user:n,login:a,logout:l,save:o,reset:(0,i.useCallback)((function(){return e.emit("reset"),!0}),[e])}};const z=function(){var e=(0,i.useContext)(B),t=(0,i.useState)([]),n=(0,g.default)(t,2),r=n[0],a=n[1];(0,i.useEffect)((function(){var t=function(e){a(e)};return e.on("buyers",t),e.on("connect",(function(){return e.emit("buyers",t)})),function(){e.off("buyers",t),e.off("connect",t)}}),[e]);return[r,function(t){e.emit("editBuyer",t)},function(t){e.emit("addBuyer",t)},function(){return e.emit("buyers",(function(e){return a(e)}))}]};const K=function(){var e=(0,i.useContext)(B),t=(0,i.useState)([]),n=(0,g.default)(t,2),r=n[0],a=n[1];(0,i.useEffect)((function(){var t=function(e){a(e)};return e.on("suppliers",t),function(){e.off("suppliers",t)}}),[e]);return[r,function(t){e.emit("editSupplier",t)},function(t){e.emit("addSupplier",t)},function(){return e.emit("suppliers",(function(e){return a(e)}))}]};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const _=function(e){var t=e.onLogin,n=V(),r=(n.user,n.login),a=(n.logout,n.reset),l=(0,i.useState)(!1),o=(0,g.default)(l,2),s=o[0],u=o[1],d=z(),c=(0,g.default)(d,4),f=c[0],v=c[3],S=K(),P=(0,g.default)(S,4),w=P[0],C=P[3],T=(0,i.useContext)(B),F=(0,i.useState)(T.connected),E=(0,g.default)(F,2),L=E[0],I=E[1];return(0,i.useEffect)((function(){v(),C(),T.on("connect",(function(){return I(!0)})),T.on("disconnect",(function(){return I(!1)}))}),[]),(0,R.jsx)(j.default,{style:W.container,children:(0,R.jsxs)(b.default,{contentContainerStyle:W.scrollView,children:[(0,R.jsxs)(m.default,{children:[(0,R.jsx)(y.default,{style:W.title,children:"V\xe4lj anv\xe4ndare att testa med"}),(0,R.jsx)(O.default,{style:W.subheading,children:"Producent"}),w.map((function(e,n){return(0,R.jsxs)(m.default,{style:W.searchResult,children:[(0,R.jsx)(x.default,{size:30,style:W.avatar,source:{uri:"https://skaff-api.iteam.pub"+e.image}}),(0,R.jsxs)(h.default,{style:W.searchResultName,onPress:(0,p.default)((function*(){var n;try{n=yield D()}catch(a){console.log("push error",a)}r(e,n),t(e)})),children:[e.name," ",e.online&&" \ud83e\udd55"]})]},n)})),(0,R.jsx)(O.default,{style:N(N({},W.subheading),{},{marginTop:30}),children:"Best\xe4llare"}),f.map((function(e,n){return(0,R.jsxs)(m.default,{style:W.searchResult,children:[(0,R.jsx)(x.default,{size:30,style:W.avatar,source:{uri:"https://skaff-api.iteam.pub"+e.image}}),(0,R.jsxs)(h.default,{style:W.searchResultName,onPress:(0,p.default)((function*(){var n;try{n=yield D()}catch(a){console.log("push error",a)}r(e,n),t(e)})),children:[e.name," ",e.online&&" \ud83e\udd55"]})]},n)}))]}),(0,R.jsx)(k.default,{onPress:function(){return a()&&u(!0)||setTimeout((function(){return u(!1)}),1e4)},children:L?s?"\xc5terst\xe4ller...":"\xc5terst\xe4ll demo":"Server offline"})]})})};var W=v.default.create({title:{textAlign:"center",marginVertical:30},container:{flex:1,alignItems:"center",justifyContent:"space-around"},loginForm:{flex:1,alignItems:"center",justifyContent:"center"},scrollView:{flex:1,alignItems:"center",justifyContent:"space-around"},button:{margin:5},avatar:{marginRight:5},searchResultName:{paddingTop:10},searchResult:{flexDirection:"row",marginBottom:10},linkContainer:{flex:1,flexDirection:"row",marginBottom:10},subheading:{marginBottom:20}}),H=n(9422),U=n(8279),G=n(2321),Y=n(5053),J=n(7726),X=n(4694),Q=n(2149),Z=n(9846),$=n(5899),ee={Frozen:{title:"Djupfryst",image:"/assets/area_frozen_food.png"},"Fresh/Cooled":{title:"F\xe4rskvaror/Kylvaror",image:"/assets/area_fresh_or_cooled.png"},"Grocery/Specialty":{title:"Kolonial/Speceri",image:"/assets/area_groceries.png"},BakeryGoods:{title:"Bagerivaror"},DryGoods:{title:"Torrvaror"},CannedGoods:{title:"Konserver"},Beverages:{title:"Drycker"},CondimentsAndSpices:{title:"Kryddor och kryddblandningar"},DiaryProducts:{title:"Mejeriprodukter"},FishAndSeafood:{title:"Fisk och skaldjur"},Pastries:{title:"Konditorivaror"},Snacks:{title:"Snacks"},HealthFoods:{title:"H\xe4lsokost"},NonAlcoholicBeverages:{title:"Alkoholfria drycker"},Other:{title:"Other",image:"/assets/area_fruit.png"}},te={organic:{title:"Organisk"},MSC:{title:"MSC"},kravMarked:{title:"Kravm\xe4rkt"},ethical:{title:"Etisk"},fairtrade:{title:"Fairtrade"},locallyProduced:{title:"N\xe4rodlad"}};const ne=function(){var e=(0,i.useContext)(B),t=(0,i.useState)([]),n=(0,g.default)(t,2),r=n[0],a=n[1];(0,i.useEffect)((function(){var t=function(e){a(e)};return e.on("deals",t),function(){e.off("deals",t)}}),[e]);return[r,function(t){e.emit("editDeal",t)},function(t){e.emit("addDeal",t)},function(){return e.emit("deals",(function(e){return a(e)}))}]};function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ie=function(e){var t=e.navigation,n=i.useState({}),l=(0,g.default)(n,2),o=l[0],s=l[1],u=i.useState(""),d=(0,g.default)(u,2),c=d[0],f=d[1],p=i.useState(new Array),m=(0,g.default)(p,2),h=m[0],j=m[1],v=ne(),x=(0,g.default)(v,4),y=x[0],k=x[3],O=V().user,S=i.useState({}),P=(0,g.default)(S,2),w=P[0],C=P[1];return i.useLayoutEffect((function(){k()}),[]),i.useEffect((function(){j(y.filter((function(e){return e.product.name.toLowerCase().includes(c.toLowerCase())})))}),[ee,c,y]),i.useEffect((function(){var e=Object.entries(ee).reduce((function(e,t){var n=(0,g.default)(t,2),a=n[0],i=n[1];return Object.assign(e,(0,r.default)({},a,ae(ae({},i),{},{count:h.filter((function(e){return e.commodity.area===i.title})).length})))}),{});C(e)}),[h]),(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(b.default,{children:[(0,R.jsx)(Z.default,{placeholder:"S\xf6k erbjudande",onChangeText:f,value:c,style:le.searchbar}),Object.entries(w).filter((function(e){return(0,g.default)(e,2)[1].count>0})).map((function(e){var n=(0,g.default)(e,2)[1];return(0,R.jsxs)(G.default,{children:[(0,R.jsx)(a.TouchableOpacity,{onPress:function(){return s((function(e){return ae(ae({},e),{},(0,r.default)({},n.title,!e[n.title]))}))},children:(0,R.jsx)(G.default.Cover,{source:{uri:"https://skaff-api.iteam.pub"+n.image}})}),(0,R.jsxs)(J.default,{title:n.title,expanded:!!c||o[n.title]||void 0,children:[(0,R.jsx)(X.default,{children:n.count+" varor"}),h.filter((function(e){return e.commodity.area===n.title})).sort((function(e,t){return e.product.name.localeCompare(t.product.name)})).map((function(e){return(0,R.jsx)(Q.default,{right:function(){return(0,R.jsxs)($.default,{children:[e.price.SEK_per_Kg," kr/kg"]})},title:e.product.name,description:e.supplier.name,onPress:function(){return t.navigate("Deal",{deal:e})}},e.id)}))]})]},n.title)}))]}),"supplier"===(null==O?void 0:O.type)&&(0,R.jsx)(Y.default,{style:le.fab,onPress:function(){return t.navigate("CreateDeal")},icon:"plus"})]})};var le=v.default.create({searchbar:{backgroundColor:"white",marginBottom:16},fab:{position:"absolute",margin:16,right:0,bottom:0},card:{margin:10,backgroundColor:"white"},cover:{height:200,borderRadius:0}}),oe=n(4149),se=n(6790),ue=n(9650),de=n(1249),ce=n(3173),fe=n(6922),pe=n(1451),ge=n(4018),me=n(5640),he=[{id:1,type:"question",text:"Vad h\xe4nder om sk\xf6rden blir mindre \xe4n t\xe4nkt?",date:"2021-05-01T12:00:00"},{id:2,type:"answer",text:"Vi f\xf6r en kontinuerlig dialog och l\xf6ser det i s\xe5 fall tillsammans.",date:"2021-05-01T12:01:00"},{id:3,type:"question",text:"Hur exakt \xe4r leveransplanen?",date:"2021-05-02T12:02:00"}],je=v.default.create({container:{padding:10,flexGrow:1,justifyContent:"flex-end"},messageContainer:{width:"70%",paddingHorizontal:16,paddingVertical:10,borderRadius:20,marginBottom:10},answer:{alignSelf:"flex-start",backgroundColor:"#757575",marginBottom:26},question:{alignSelf:"flex-end",backgroundColor:"#26CC77"},messageText:{fontSize:16,color:"#FFF"},messageMetadata:{alignSelf:"center",marginTop:-10,color:"#999"},inputContainer:{flexDirection:"row",alignItems:"center",marginTop:10},input:{flex:1,backgroundColor:"#FFF",paddingHorizontal:12,paddingVertical:8,borderRadius:20},sendButton:{marginLeft:10,backgroundColor:"#26CC77",paddingHorizontal:16,paddingVertical:8,borderRadius:20},sendButtonText:{color:"#FFF",fontSize:16}});const ve=function(){var e=(0,i.useState)(""),t=(0,g.default)(e,2),n=t[0],r=t[1];return(0,R.jsx)(me.SafeAreaView,{style:{flex:1},children:(0,R.jsx)(ge.default,{children:(0,R.jsxs)(b.default,{contentContainerStyle:je.container,children:[he.map((function(e,t){return(0,R.jsxs)(m.default,{children:[(0,R.jsx)(m.default,{style:[je.messageContainer,"question"===e.type?je.question:je.answer],children:(0,R.jsx)(h.default,{style:je.messageText,children:e.text})}),t===he.length-1&&(0,R.jsx)(oe.default,{style:je.messageMetadata,children:e.date})]},e.id)})),(0,R.jsxs)(m.default,{style:je.inputContainer,children:[(0,R.jsx)(a.TextInput,{style:je.input,value:n,onChangeText:r,placeholder:"Skriv din fr\xe5ga h\xe4r..."}),(0,R.jsx)(pe.default,{onPress:function(){var e;n&&(he.push({id:((null==(e=he.at(-1))?void 0:e.id)||0)+1,type:"question",text:n,date:(new Date).toISOString()}),r(""))},style:je.sendButton,children:(0,R.jsx)(h.default,{style:je.sendButtonText,children:"Skicka"})})]})]})})})};function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=function(e){var t=e.product,n=e.supplier,r=e.price;return(0,R.jsxs)(m.default,{style:xe(xe({},we.container),we.header),children:[(0,R.jsx)(se.default,{children:t.name}),(0,R.jsx)(O.default,{children:n.name}),(0,R.jsxs)(O.default,{style:{fontWeight:"bold"},children:[Math.round(r.SEK).toLocaleString("sv")," kr"]})]})},ke=function(e){var t=e.children;return(0,R.jsx)(m.default,{style:{flexDirection:"row",marginBottom:10},children:t})},Oe=function(e){var t=e.children;return(0,R.jsx)(m.default,{style:{flexDirection:"column",marginRight:20,flex:1},children:t})},Se=function(e){var t=e.children;return(0,R.jsx)(m.default,{style:we.container,children:t})};const Pe=function(e){var t,r,a=e.route,l=e.navigation,o=i.useState(!1),s=(0,g.default)(o,2),u=s[0],d=(s[1],i.useState(a.params.deal)),c=(0,g.default)(d,2),f=c[0],p=c[1],h=ne(),j=(0,g.default)(h,1)[0];if(i.useEffect((function(){if(a.params.dealId){var e=j.find((function(e){return e.id===a.params.dealId}));p(e)}}),[a.params.dealId]),!f)return(0,R.jsxs)($.default,{children:["Deal not found: ",a.params.dealId]});var v=(0,ue.useTheme)();console.log("deal",f);return i.useLayoutEffect((function(){l.setOptions({headerRight:function(){return(0,R.jsx)(k.default,{children:[],icon:u?"star":"star-outline",onPress:function(){n.g.alert("Ej implementerad \xe4n")}})}})}),[f,u]),(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(ye,xe({},f)),(0,R.jsxs)(fe.Tabs,{uppercase:!1,style:{backgroundColor:"#D8F5E3"},dark:!1,theme:v,children:[(0,R.jsx)(fe.TabScreen,{label:"Information",children:(0,R.jsxs)(b.default,{children:[(0,R.jsxs)(Se,{children:[(0,R.jsxs)(ke,{children:[(0,R.jsxs)(Oe,{children:[(0,R.jsx)(oe.default,{children:"Tillverkare"}),(0,R.jsx)($.default,{children:f.product.manufacturer||"Ej k\xe4nt"})]}),(0,R.jsxs)(Oe,{children:[(0,R.jsx)(oe.default,{children:"Varum\xe4rke"}),(0,R.jsx)($.default,{children:f.product.brand||"Ej k\xe4nt"})]})]}),(0,R.jsx)(ke,{children:(0,R.jsxs)(Oe,{children:[(0,R.jsx)(oe.default,{children:"Beskrivning"}),(0,R.jsxs)($.default,{children:[function(e){return e.commodity.group+" i kategorin "+e.commodity.mainGroup.toLocaleLowerCase()+" "+e.commodity.area.toLocaleLowerCase()}(f)," S\xe4ljs i paket om"," ",null==(t=f.price.kilos)?void 0:t.toLocaleString("sv"),"kg."]})]})}),(0,R.jsxs)(ke,{children:[(0,R.jsxs)(Oe,{children:[(0,R.jsx)(oe.default,{children:"Pris"}),(0,R.jsxs)($.default,{children:[null==(r=f.price.SEK_per_Kg)?void 0:r.toLocaleString("sv")," kr/kg"]})]}),(0,R.jsxs)(Oe,{children:[(0,R.jsx)(oe.default,{children:"Paketstorlek"}),(0,R.jsxs)($.default,{children:[f.price.kilos.toLocaleString("sv")," kg"]})]})]})]}),(0,R.jsxs)(de.default,{children:[(0,R.jsxs)(de.default.Header,{children:[(0,R.jsx)(de.default.Title,{children:"Milj\xf6m\xe4rkning"}),(0,R.jsx)(de.default.Title,{children:"Godk\xe4nd"})]}),Object.entries(f.certifications).filter((function(e){return(0,g.default)(e,2)[1]})).map((function(e,t){var n=(0,g.default)(e,2),r=n[0],a=n[1];return(0,R.jsxs)(de.default.Row,{children:[(0,R.jsx)(de.default.Cell,{children:te[r].title}),(0,R.jsx)(de.default.Cell,{children:(0,R.jsx)(ce.default,{status:a?"checked":"unchecked"})})]},t)}))]}),(0,R.jsx)(m.default,{style:we.actionContainer,children:(0,R.jsx)(k.default,{mode:"contained",onPress:function(){return l.navigate("TenderRequests",{screen:"CreateTenderRequest",params:{title:f.product.name}})},uppercase:!1,children:"Skapa anbudsf\xf6rfr\xe5gan"})})]})}),(0,R.jsx)(fe.TabScreen,{label:"Meddelande",children:(0,R.jsx)(ve,{})})]})]})};var we=v.default.create({container:{padding:16},header:{},actionContainer:{flexDirection:"row",display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:20,paddingTop:20}}),Ce=n(6770),Te=n(7220);const De=[{id:"1",type:"supplier",online:!1,name:"Kalles AB",image:"/assets/avatars/Image008.png",address:"Mejerigatan 2",zip:"653 43",postalAddress:"Karlstad",email:"info@kalles.se",produce:["Mor\xf6tter","Palsternackor","R\xe4disor"],description:"Vi \xe4r din lokala leverant\xf6r av n\xe4rproducerad mat och dryck fr\xe5n V\xe4rmland. Best\xe4ll lokalt och n\xe4rproducerat mathantverk som producerats d\xe4r du sj\xe4lv lever och bor - f\xf6r smakernas, djurens, m\xe4nniskornas och milj\xf6ns skull."},{id:"2",type:"supplier",online:!1,name:"Liljen\xe4s G\xe5rd",image:"/assets/avatars/Image009.png",address:"\xc4lvdalsv\xe4gen 35",zip:"683 93",postalAddress:"R\xe5da",email:"info@liljenasgard.se",produce:["Lammk\xf6tt","K\xf6ttf\xe4rs","N\xf6tf\xe4rs"],description:"Vi bevarar gamla traditioner i en modern tillverkning, det f\xe5r ta lite extra tid och vi v\xe4ljer v\xe5ra k\xf6ttleverant\xf6rer med omsorg. Vi vet genom v\xe5ra kunder att det \xe4r smaken och vetskapen att det \xe4r producerat med k\xe4rlek som avg\xf6r i slut\xe4ndan."},{id:"3",type:"supplier",online:!1,name:"Wermlands Mejeri",image:"/assets/avatars/Image010.png",address:"Gillbergav\xe4gen 2",zip:"661 95",postalAddress:"V\xe4rmlands Nys\xe4ter",email:"info@wermlandsmeeri.se",produce:["Komj\xf6lk","Yoghurt","Ost"],description:"V\xe4lkommen till Wermlands Mejeri. Ett mejeri med hj\xe4rtat i V\xe4rmlands Nys\xe4ter som s\xe4ljer n\xe4rproducerad mj\xf6lk och gr\xe4dde fr\xe5n v\xe4rml\xe4ndska kor."},{id:"4",type:"supplier",online:!1,name:"Magdakullan",image:"/assets/avatars/Image003.png",address:"Magdav\xe4gen 2",zip:"661 95",postalAddress:"Margaetelundsv\xe4gen 1337",email:"info@margaretelund.se",produce:["Komj\xf6lk","Yoghurt","Ost"],description:"V\xe4lkommen till Magdakullan. Ett mejeri med hj\xe4rtat i Magdakullan som s\xe4ljer n\xe4rproducerad sk\xe5lar och f\xe4rdigmat fr\xe5n v\xe4rml\xe4ndska kor."}];const Fe=[{id:"1",type:"buyer",online:!1,name:"Fredricelundsskolan",image:"/assets/avatars/Image003.png",address:"Tall\xe5sv\xe4gen 2",zip:"653 45",postalAddress:"Karlstad",email:"info@fredricelundsskolan.se",description:"N\xe4r du kommer till oss m\xf6ts du av gl\xe4dje och god st\xe4mning! Fredricelundsskolan \xe4r en skola med elever fr\xe5n f\xf6rskoleklass till \xe5rskurs 6 med cirka 280 elever. V\xe5r skola ligger p\xe5 V\xe5xn\xe4s cirka fyra kilometer nordv\xe4st om Karlstads centrum i ett naturfint omr\xe5de med park och skog i n\xe4rheten."},{id:"2",type:"buyer",name:"Fr\xf6dingskolan",image:"/assets/avatars/Image004.png",address:"Posthornsgatan 6",zip:"656 32",postalAddress:"Karlstad",email:"info@frodingskolan.se",description:"N\xe4r du kommer till Fr\xf6dingskolan m\xf6ts du av gl\xe4dje och nyfikenhet. Eleverna p\xe5 skolan kommer fr\xe5n m\xe5nga olika kulturella bakgrunder. Detta ger en dynamik i l\xe4randet och en h\xe4rlig atmosf\xe4r! Fr\xf6dingskolans fr\xe4msta m\xe5l \xe4r att ge goda kunskaper och st\xe4rka spr\xe5ket i alla \xe4mnen s\xe5 att eleverna \xe4r v\xe4l f\xf6rberedda f\xf6r vidare studier och arbetsliv."},{id:"3",type:"buyer",name:"Kvarnbergsskolan",image:"/assets/avatars/Image005.png",address:"\xd6lmegatan 10",zip:"656 30",postalAddress:"Karlstad",email:"info@kvarnbergsskolan.se",description:"Kvarnbergssskolan \xe4r en F-6 skola som ing\xe5r i Skolomr\xe5de Syd. En skola f\xf6r ALLA \xe4r viktigt f\xf6r oss p\xe5 Kvarnbergsskolan. Med forskningen som utg\xe5ngspunkt str\xe4var vi efter att skapa en kreativ milj\xf6 f\xf6r stor som liten."},{id:"4",type:"buyer",name:"V\xe5lbergsskolan",image:"/assets/avatars/Image006.png",address:"\xc5slidsgatan 4B",zip:"660 50",postalAddress:"V\xe5lberg",email:"info@valbergsskolan.se",description:"V\xe4lkommen till V\xe5lbergsskolan! F\xf6r oss \xe4r det viktigt att era barn f\xe5r ett bra bem\xf6tande och att vi har goda relationer med varandra."},{id:"5",type:"buyer",name:"Nyeds skola",image:"/assets/avatars/Image007.png",address:"",zip:"660 60",postalAddress:"Molkom",email:"info@nyedsskola.se",description:"V\xe5r str\xe4van \xe4r att v\xe5ra elever ska n\xe5 h\xf6ga resultat som ger goda f\xf6ruts\xe4ttningar f\xf6r vidare studier, ett gott liv och hopp om en meningsfull framtid"}];const Ee=function(e){var t=e.navigation,n=i.useState(""),r=(0,g.default)(n,2),a=r[0],l=r[1],o=((0,ue.useTheme)(),De.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())}))),s=Fe.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())}));return(0,R.jsx)(j.default,{children:(0,R.jsxs)(b.default,{children:[(0,R.jsx)(Z.default,{placeholder:"S\xf6k producent/best\xe4llare",onChangeText:l,value:a,style:Re.searchbar}),(0,R.jsxs)(m.default,{style:Re.container,children:[(0,R.jsx)(O.default,{style:Re.header,children:"Producenter"}),o.map((function(e,n){return(0,R.jsxs)(m.default,{style:Re.searchResult,children:[(0,R.jsx)(x.default,{size:30,style:Re.avatar,source:{uri:"https://skaff-api.iteam.pub"+e.image}}),(0,R.jsx)($.default,{style:Re.searchResultName,onPress:function(){return t.navigate("Supplier",{supplier:e})},children:e.name})]},n)})),0===a.length&&(0,R.jsx)(m.default,{style:Re.linkContainer,children:(0,R.jsxs)(k.default,{uppercase:!1,children:["Ans\xf6k om att bli ansluten"," ",(0,R.jsx)(Te.default,{name:"open-in-new",color:"black",size:20})]})}),(0,R.jsx)(Ce.default,{}),(0,R.jsx)(O.default,{style:Re.header,children:"Best\xe4llare"}),s.map((function(e){return(0,R.jsxs)(m.default,{style:Re.searchResult,children:[(0,R.jsx)(x.default,{size:30,style:Re.avatar,source:{uri:"https://skaff-api.iteam.pub"+e.image}}),(0,R.jsx)($.default,{style:Re.searchResultName,onPress:function(){return t.navigate("Buyer",{buyer:e})},children:e.name})]},e.id)}))]})]})})};var Re=v.default.create({container:{padding:10},title:{fontWeight:"bold",marginBottom:10},searchbar:{backgroundColor:"white",marginBottom:16},header:{marginTop:20,marginBottom:10},avatar:{marginRight:5},searchResultName:{paddingTop:10},searchResult:{flex:1,flexDirection:"row",marginBottom:10},linkContainer:{flex:1,flexDirection:"row",marginBottom:10}}),Be=n(9652),Le=n(6458);const Ie=function(e){var t,n=e.route,r=e.navigation,a=e.editable,l=n.params.supplier;return console.log("supplier",l),(0,i.useEffect)((function(){l&&(r.header="Profil",r.setOptions({title:l.name}))}),[l]),(0,R.jsx)(b.default,{style:qe.scrollView,children:l&&(0,R.jsxs)(m.default,{style:qe.headerContainer,children:[a&&(0,R.jsx)(Le.default,{icon:"pencil",size:20,style:qe.editButton}),(0,R.jsx)(x.default,{size:150,style:qe.avatar,source:{uri:"https://skaff-api.iteam.pub"+l.image}}),(0,R.jsx)($.default,{style:qe.address,children:l.address}),(0,R.jsxs)($.default,{style:qe.address,children:[l.zip," ",l.postalAddress]}),(0,R.jsx)($.default,{style:qe.email,children:l.email}),(0,R.jsx)(Ce.default,{style:qe.divider}),(0,R.jsx)(O.default,{style:qe.subHeading,children:"Varor"}),null==l||null==(t=l.produce)?void 0:t.map((function(e){return(0,R.jsx)($.default,{style:qe.produce,children:e},e)})),(0,R.jsx)(O.default,{style:qe.subHeading,children:"Presentation"}),(0,R.jsx)(Be.default,{style:qe.description,children:l.description})]})})};var qe=v.default.create({scrollView:{padding:10},headerContainer:{width:"100%"},heading:{marginTop:20,alignSelf:"center",fontWeight:"bold"},avatar:{alignSelf:"center",marginBottom:10},address:{alignSelf:"center",marginTop:5},email:{alignSelf:"center",marginTop:15},produce:{marginTop:3},description:{marginTop:3,lineHeight:20},divider:{marginTop:20},subHeading:{marginTop:20},editButton:{alignSelf:"flex-end"}});const Ae=function(e){var t=e.route,n=e.navigation,r=e.editable,a=t.params.buyer;return(0,i.useEffect)((function(){a&&(n.header="Profil",n.setOptions({title:a.name}))}),[a]),(0,R.jsx)(b.default,{style:Ve.scrollView,children:a&&(0,R.jsxs)(m.default,{style:Ve.headerContainer,children:[r?(0,R.jsx)(Le.default,{icon:"pencil",size:20,style:Ve.editButton}):(0,R.jsx)(y.default,{style:Ve.heading,children:a.name}),(0,R.jsx)(x.default,{size:150,style:Ve.avatar,source:{uri:"https://skaff-api.iteam.pub"+a.image}}),(0,R.jsx)($.default,{style:Ve.address,children:a.address}),(0,R.jsxs)($.default,{style:Ve.address,children:[a.zip," ",a.postalAddress]}),(0,R.jsx)($.default,{style:Ve.email,children:a.email}),(0,R.jsx)(m.default,{style:Ve.menuContainer,children:(0,R.jsxs)(k.default,{style:Ve.menuLink,uppercase:!1,children:["Planerad matsedel"," ",(0,R.jsx)(Te.default,{name:"open-in-new",color:"black",size:20})]})}),(0,R.jsx)(O.default,{children:"Presentation"}),(0,R.jsx)(Be.default,{style:Ve.description,children:a.description})]})})};var Ve=v.default.create({scrollView:{padding:10},headerContainer:{width:"100%"},heading:{marginTop:20,alignSelf:"center",fontWeight:"bold"},avatar:{alignSelf:"center",marginBottom:10},address:{alignSelf:"center",marginTop:5},email:{alignSelf:"center",marginTop:15},description:{lineHeight:20},menuContainer:{flex:1,flexDirection:"row",marginTop:20,marginBottom:10},menuLink:{marginLeft:-12},editButton:{alignSelf:"flex-end"}});const ze=function(){var e=(0,H.default)();return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(e.Navigator,{children:[(0,R.jsx)(e.Screen,{name:"ExploreSuppliersAndBuyers",options:{title:"Utforska"},component:Ee}),(0,R.jsx)(e.Screen,{name:"Supplier",options:{title:"Utforska producent"},component:Ie}),(0,R.jsx)(e.Screen,{name:"Buyer",options:{title:"Utforska best\xe4llare"},component:Ae})]})})};var Ke=n(7986);const Me=function(){var e=(0,i.useContext)(B),t=(0,i.useState)(new Array),n=(0,g.default)(t,2),r=n[0],a=n[1];(0,i.useEffect)((function(){var t=function(e){return a(e)};return e.on("tenderRequests",t),function(){e.off("tenderRequests",t)}}),[e]);return[r,function(t){console.log("editTenderRequest",t),e.emit("editTenderRequest",t)},function(t){console.log("addTenderRequest",t),e.emit("addTenderRequest",t)},function(){return e.emit("tenderRequests",(function(e){return a(e)}))}]};var Ne=function(){return(0,R.jsx)(Te.default,{size:25,style:{marginRight:20},name:"chevron-right"})};const _e=function(e){var t=e.navigation,n=(0,i.useState)(""),r=(0,g.default)(n,2),a=r[0],l=r[1],o=(0,i.useState)(!0),s=(0,g.default)(o,2),u=s[0],d=s[1],c=V().user,f=Me(),p=(0,g.default)(f,4),m=p[0],h=(p[1],p[2],p[3]);i.useLayoutEffect((function(){h()}),[]);var j=!a&&m||m.filter((function(e){return e.title.toLowerCase().includes(a.toLowerCase())}));return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(b.default,{children:[(0,R.jsx)(Z.default,{placeholder:"S\xf6k upphandling",onChangeText:l,value:a,style:We.searchbar}),(0,R.jsxs)(Ke.default,{children:[(0,R.jsx)(J.default,{title:"Aktiva upphandlingar",onPress:function(){return d(!u)},expanded:u,children:j.map((function(e,n){return(0,R.jsx)(G.default,{style:We.card,onPress:function(){return t.navigate("TenderRequest",{tenderRequest:e})},children:(0,R.jsx)(G.default.Title,{titleVariant:"titleSmall",titleStyle:{fontSize:14},title:e.title,subtitle:e.buyer.name,right:function(e){return(0,R.jsx)(Ne,{})}})},n)}))}),(0,R.jsx)(J.default,{title:"Favoritmarkerade",children:(0,R.jsx)(G.default,{style:We.card,children:(0,R.jsx)(G.default.Title,{titleVariant:"titleSmall",titleStyle:{fontSize:14},title:"Favoritupphandling 1",subtitle:"K\xf6pare 1",right:function(e){return(0,R.jsx)(Ne,{})}})})})]})]}),"buyer"===(null==c?void 0:c.type)&&(0,R.jsx)(Y.default,{style:We.fab,onPress:function(){return t.navigate("CreateTenderRequest")},icon:"plus"})]})};var We=v.default.create({fab:{position:"absolute",margin:16,right:0,bottom:0},card:{margin:10,backgroundColor:"white"},cover:{height:200,borderRadius:0},container:{paddingHorizontal:16,paddingTop:16},label:{fontSize:16,marginBottom:8},title:{marginHorizontal:16},checkboxContainer:{flexDirection:"row",marginBottom:16},checkbox:{flexDirection:"row",alignItems:"center",marginRight:16},searchbar:{backgroundColor:"white",marginBottom:16}});const He=function(){var e=(0,i.useContext)(B),t=(0,i.useState)([]),n=(0,g.default)(t,2),r=n[0],a=n[1];(0,i.useEffect)((function(){var t=function(e){a(e)};return e.on("offers",t),function(){e.off("offers",t)}}),[e]);return[r,function(t){e.emit("editOffer",t)},function(t){e.emit("addOffer",t)},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.supplier,r=t.buyer;return e.emit("offers",(function(e){return a(e.filter((function(e){return n?e.supplier.id==n.id:!r||e.buyer.id==r.id})).sort((function(e,t){return e.price.SEK-t.price.SEK})))}))}]};function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ye=function(){return(0,R.jsx)(Te.default,{size:25,style:{marginRight:20},name:"chevron-right"})},Je=function(e){var t=e.children;return(0,R.jsx)(m.default,{style:{flexDirection:"row"},children:t})},Xe=function(e){var t=e.children;return(0,R.jsx)(m.default,{style:{flexDirection:"column",marginRight:20},children:t})},Qe=function(e){var t=e.children,n=e.style;return(0,R.jsx)(m.default,{style:Ge(Ge({},$e.container),n),children:t})};const Ze=function(e){var t,n,r,a,l,o,s,u,d=e.route,c=e.navigation,f=Me(),p=(0,g.default)(f,4),h=p[0],j=p[3],v=(0,i.useState)(d.params.tenderRequest),x=(0,g.default)(v,2),y=x[0],S=x[1],P=(0,ue.useTheme)(),w=V().user,C=He(),T=(0,g.default)(C,4),D=T[0],F=T[1],E=T[3];if((0,i.useEffect)((function(){if(null!=y&&y.id){var e=h.find((function(e){return e.id===y.id}));e&&S(e)}}),[y]),(0,i.useEffect)((function(){var e="buyer"===(null==w?void 0:w.type)?w:void 0,t="supplier"===(null==w?void 0:w.type)?w:void 0;E({buyer:e,supplier:t}),j()}),[w]),!y)return(0,R.jsxs)($.default,{children:["Ladda via parametrar st\xf6ds ej \xe4n: ",d.params.tenderRequestId]});var B=D.filter((function(e){return e.tenderRequestId===(null==y?void 0:y.id)})).filter((function(e){return e.buyer.id===(null==w?void 0:w.id)||e.supplier.id===(null==w?void 0:w.id)})).sort((function(e,t){return e.price.SEK-t.price.SEK}));return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(m.default,{style:Ge({},$e.header),children:[(0,R.jsx)(se.default,{children:y.title}),(0,R.jsx)(O.default,{children:null==(t=y.buyer)?void 0:t.name})]}),(0,R.jsxs)(fe.Tabs,{uppercase:!1,style:{backgroundColor:"#D8F5E3"},theme:P,children:[(0,R.jsx)(fe.TabScreen,{label:"F\xf6rfr\xe5gan",children:(0,R.jsxs)(b.default,{children:[(0,R.jsx)(Qe,{children:(0,R.jsxs)(Je,{children:[(0,R.jsxs)(Xe,{children:[(0,R.jsx)(oe.default,{children:"Sista svar"}),(0,R.jsx)($.default,{children:(null==(n=y.lastOfferDate)?void 0:n.toString().split("T")[0])||"Inget datum"})]}),(0,R.jsxs)(Xe,{children:[(0,R.jsx)(oe.default,{children:"Tilldelning senast"}),(0,R.jsx)($.default,{children:(null==(r=y.lastAwardDate)?void 0:r.toString().split("T")[0])||"Inget datum"})]})]})}),(0,R.jsx)(Qe,{children:(0,R.jsxs)(Je,{children:[(0,R.jsxs)(Xe,{children:[(0,R.jsx)(oe.default,{children:"Leveransplan"}),(0,R.jsx)($.default,{children:y.deliveryPlan})]}),(0,R.jsxs)(Xe,{children:[(0,R.jsx)(oe.default,{children:"F\xf6rsta leverans"}),(0,R.jsx)($.default,{children:null==(a=y.deliveryStartDate)?void 0:a.toString().split("T")[0]})]})]})}),(0,R.jsxs)(Qe,{children:[(0,R.jsx)(O.default,{children:"Villkor"}),(0,R.jsx)(Be.default,{children:y.terms})]}),(0,R.jsx)(Ce.default,{}),(0,R.jsxs)(Qe,{children:[(0,R.jsx)(O.default,{children:"Urval"}),(0,R.jsx)(Be.default,{children:y.grading})]}),(0,R.jsxs)(Qe,{children:[(0,R.jsx)(O.default,{children:"Krav"}),null==(l=y.qualificationCriteria)?void 0:l.map((function(e,t){return(0,R.jsx)(Be.default,{children:e},t)}))]}),(0,R.jsxs)(Qe,{children:[(0,R.jsx)(O.default,{children:"\xd6nskem\xe5l"}),null==(o=y.optionalCriteria)?void 0:o.map((function(e,t){return(0,R.jsx)(Be.default,{children:e},t)}))]}),(0,R.jsxs)(Qe,{style:{flexDirection:"row",display:"flex",backgroundColor:"#DCF6FE",margin:20,padding:10,paddingTop:10,paddingBottom:10},children:[(0,R.jsx)(Te.default,{name:"exclamation",color:"black",size:20}),(0,R.jsx)(Be.default,{style:{paddingLeft:10,paddingRight:20},children:"Ett uppfyllt \xf6nskem\xe5l genererar, i j\xe4mf\xf6relsen mot andra anbud, ett prisavdrag motsvarande det uppskattade v\xe4rdet. Offererat pris \xe4r fortfarande det som g\xe4ller vid fakturering."})]})]})}),(0,R.jsx)(fe.TabScreen,{label:"Meddelande",children:(0,R.jsx)(ve,{})}),(0,R.jsx)(fe.TabScreen,{label:"Anbud",children:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(R.Fragment,{children:"supplier"===(null==w?void 0:w.type)&&(0,R.jsxs)(Qe,{children:[!B.length&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Be.default,{children:"F\xf6r att l\xe4mna anbud m\xe5ste du vara ansluten till detta DIS. F\xf6r att kontrollera att du \xe4r det kan du g\xe5 till xx..yy.z"}),(0,R.jsx)(k.default,{mode:"contained",onPress:function(){c.navigate("TenderRequests",{screen:"CreateOffer",params:{tenderRequest:y}})},children:"L\xe4mna anbud"})]}),(0,R.jsxs)(Ke.default,{children:[(0,R.jsx)(X.default,{children:"Dina skickade anbud"}),B.map((function(e,t){var n;return(0,R.jsx)(G.default,{style:$e.card,onPress:function(){console.log("pressed",e),c.navigate("Supplier",{supplier:e.supplier})},children:(0,R.jsx)(G.default.Title,{titleVariant:"titleSmall",titleStyle:{fontSize:14},left:function(e){return(0,R.jsx)(Te.default,{name:"file-document-outline",color:"black",size:24})},title:e.price.SEK+" kr",subtitle:"Inl\xe4mnad "+(null==(n=e.submissionDate)?void 0:n.toString().split("T")[0])+". "+(e.approved?"Vunnen":"Ej godk\xe4nt"),right:function(e){return(0,R.jsx)(Ye,{})}})},t)}))]})]})}),"buyer"===(null==w?void 0:w.type)&&(null==(s=y.buyer)?void 0:s.id)==(null==w?void 0:w.id)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Qe,{children:(0,R.jsx)(Be.default,{children:"Inskickade anbud sorteras efter l\xe4gsta pris med eventuella avdrag f\xf6r uppfyllda \xf6nskem\xe5l."})}),(0,R.jsxs)(Qe,{children:[(0,R.jsx)(O.default,{children:"Matchande anbud"}),B.map((function(e,t){var n,r;return(0,R.jsx)(G.default,{style:$e.card,children:(0,R.jsx)(G.default.Title,{titleVariant:"titleSmall",titleStyle:{fontSize:14},title:e.price.SEK+" kr fr\xe5n: "+(null==(n=e.supplier)?void 0:n.name),subtitle:"Inkom "+(null==(r=e.submissionDate)?void 0:r.toString().split("T")[0]),right:function(t){return e.approved?(0,R.jsxs)(Qe,{style:{flexDirection:"row",display:"flex"},children:[(0,R.jsx)(Te.default,{size:25,name:"clipboard-check"}),(0,R.jsx)($.default,{style:{marginLeft:5,marginTop:5},children:"Tilldelad"})]}):D.filter((function(e){return e.approved})).length<1?(0,R.jsx)(k.default,{icon:"clipboard-check",mode:"contained",uppercase:!1,style:{marginRight:10},onPress:function(){console.log("offer",e),F(Ge(Ge({},e),{},{approved:!0}))},children:"Tilldela"}):void 0}})},t)}))]}),(0,R.jsxs)(Qe,{children:[(0,R.jsx)(Ce.default,{}),(0,R.jsx)(O.default,{children:"Ej uppfyllda anbud"})]})]}),"buyer"===(null==w?void 0:w.type)&&(null==(u=y.buyer)?void 0:u.id)!=(null==w?void 0:w.id)&&(0,R.jsx)(Qe,{children:(0,R.jsx)(Be.default,{children:"Som best\xe4llare kan du inte l\xe4mna anbud p\xe5 andra best\xe4llares anbudsf\xf6rfr\xe5gningar."})})]})})]})]})};var $e=v.default.create({header:{margin:16},container:{paddingLeft:20,paddingRight:20,paddingTop:20,paddingBottom:5},card:{marginTop:5,marginBottom:5,backgroundColor:"white"}}),et=n(8551);const tt=function(){var e=(0,i.useContext)(B),t=(0,i.useState)([]),n=(0,g.default)(t,2),r=n[0],a=n[1],l=V().user;(0,i.useEffect)((function(){if(e){var t=function(e){l&&a(e.filter((function(e){var t,n;return null==(t=e.data)||null==(n=t.to)?void 0:n.includes(null==l?void 0:l.id)})).sort((function(e,t){return new Date(t.data.date).valueOf()-new Date(e.data.date).valueOf()})))};return e.on("notifications",t),function(){e.off("notifications",t)}}}),[l,e]);return[r,function(){return e.emit("notifications",(function(e){return a(e)}))}]};function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e){var t=e.navigation,n=tt(),r=(0,g.default)(n,2),a=r[0],l=r[1],o=He(),s=(0,g.default)(o,4),u=(s[0],s[3],Me()),d=(0,g.default)(u,4),c=(d[0],d[3],ne()),f=(0,g.default)(c,4),p=f[0];f[3];return(0,i.useEffect)((function(){l()}),[]),(0,R.jsxs)(Ke.default,{children:[0===a.length&&(0,R.jsx)(Q.default,{left:function(e){return(0,R.jsx)(et.default,rt(rt({},e),{},{icon:"bell-off"}))},title:"Inga notifikationer",description:"Du har inga notifikationer \xe4n. Pr\xf6va att skapa ett erbjudande eller en f\xf6rfr\xe5gan."}),a.sort((function(e,t){return new Date(t.data.date).valueOf()-new Date(e.data.date).valueOf()})).map((function(e,n){return(0,R.jsx)(Q.default,{onPress:function(){switch(console.log("navigate to",e),e.data.type){case"offer":t.navigate("TenderRequests",{screen:"TenderRequest",params:{tenderRequestId:e.data.tenderRequestId}});break;case"tenderRequest":t.navigate("TenderRequests",{screen:"TenderRequest",params:{tenderRequestId:e.data.id}});break;case"deal":t.navigate("Deal",{deal:p.find((function(t){return t.id===e.data.id}))})}},title:e.title,right:function(e){return(0,R.jsx)(et.default,rt(rt({},e),{},{icon:"chevron-right"}))},description:e.body,left:function(e){return(0,R.jsx)(et.default,rt(rt({},e),{},{icon:"bell"}))}},n)}))]})}const it=function(e){var t,n=e.offer,r=e.navigation,a=e.user;null==a||a.type,null==a||a.type;return(0,R.jsx)(G.default,{style:lt.card,onPress:function(){return r.navigate("TenderRequest",{tenderRequestId:n.tenderRequestId})},children:(0,R.jsx)(G.default.Title,{title:n.price.SEK+" kr - "+n.buyer.name,titleVariant:"titleSmall",titleStyle:{fontSize:14,color:n.approved?"green":"black"},subtitle:"Inl\xe4mnat: "+(null==(t=n.submissionDate)?void 0:t.toString().split("T")[0]),right:function(e){return(0,R.jsx)(k.default,{icon:"chevron-right"})}})})};var lt=v.default.create({header:{margin:16},card:{margin:10,backgroundColor:"white"},infoCard:{marginTop:5,marginBottom:5}});const ot=function(e){var t=e.deal,n=e.navigation;return(0,R.jsx)(G.default,{style:st.card,onPress:function(){return n.navigate("Deals",{screen:"Deal",params:{deal:t}})},children:(0,R.jsx)(G.default.Title,{title:t.product.name,titleVariant:"titleSmall",titleStyle:{fontSize:14},subtitle:"Pris: "+t.price.SEK,right:function(e){return(0,R.jsx)(k.default,{icon:"chevron-right"})}})})};var st=v.default.create({header:{margin:16},card:{margin:10,backgroundColor:"white"},infoCard:{marginTop:5,marginBottom:5}});const ut=function(e){var t,n=e.tenderRequest,r=e.navigation;return(0,R.jsx)(G.default,{style:dt.card,onPress:function(){return r.navigate("TenderRequests",{screen:"TenderRequest",params:{tenderRequestId:n.id}})},children:(0,R.jsx)(G.default.Title,{title:n.title,titleVariant:"titleSmall",titleStyle:{fontSize:14},subtitle:"Tilldelningsdatum: "+(null==(t=n.lastAwardDate)?void 0:t.toString().split("T")[0]),right:function(e){return(0,R.jsx)(k.default,{icon:"chevron-right"})}})})};var dt=v.default.create({header:{margin:16},card:{margin:10,backgroundColor:"white"},infoCard:{marginTop:5,marginBottom:5}});function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const pt=function(e){var t=e.route,n=e.navigation,r=(0,ue.useTheme)(),a=(0,i.useState)(!0),l=(0,g.default)(a,2),o=l[0],s=l[1],u=Me(),d=(0,g.default)(u,4),c=d[0],f=d[3],p=ne(),m=(0,g.default)(p,4),h=m[0],j=m[3],v=V(),x=v.user,y=v.logout,O=He(),S=(0,g.default)(O,4),P=S[0],w=S[3];if(!x)return null;(0,i.useEffect)((function(){f(),n.header="Profil",n.setOptions({title:x.name})}),[x]),(0,i.useEffect)((function(){w({supplier:x}),f(),j()}),[x]);var C=P.filter((function(e){return e.supplier.id===x.id})),T=h.filter((function(e){return e.supplier.id===x.id})),D=c.filter((function(e){return C.some((function(t){return t.tenderRequestId===e.id}))}));return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(fe.Tabs,{uppercase:!1,style:{backgroundColor:"#D8F5E3"},theme:r,children:[(0,R.jsx)(fe.TabScreen,{label:"Aktuellt",children:(0,R.jsxs)(b.default,{children:[(0,R.jsxs)(J.default,{title:"Anbud",expanded:o,onPress:function(){return s((function(e){return!e}))},children:[(0,R.jsx)(X.default,{children:"Inskickade anbud"}),0===C.length&&(0,R.jsx)(G.default.Title,{title:"Inga anbud",subtitle:"Du har inte skickat in n\xe5gra anbud"}),C.map((function(e,t){return(0,R.jsx)(it,{user:x,offer:e,navigation:n},e.id)}))]}),(0,R.jsx)(Ce.default,{}),(0,R.jsxs)(J.default,{title:"Erbjudanden",expanded:!0,children:[(0,R.jsx)(X.default,{children:"Publicerade"}),T.map((function(e,t){return(0,R.jsx)(ot,{user:x,deal:e,navigation:n},t)}))]})]})}),(0,R.jsx)(fe.TabScreen,{label:"Mina avtal",children:(0,R.jsxs)(b.default,{children:[(0,R.jsx)(J.default,{title:"P\xe5g\xe5ende",expanded:!0,children:D.filter((function(e){return P.filter((function(e){return!e.approved})).some((function(t){return t.tenderRequestId===e.id}))})).map((function(e){return(0,R.jsx)(ut,{user:x,tenderRequest:e,navigation:n},e.id)}))}),(0,R.jsx)(Ce.default,{}),(0,R.jsx)(J.default,{title:"Avslutade",children:D.filter((function(e){return P.filter((function(e){return e.approved})).some((function(t){return t.tenderRequestId===e.id}))})).map((function(e,t){return(0,R.jsx)(ut,{user:x,tenderRequest:e,navigation:n},e.id)}))})]})}),(0,R.jsx)(fe.TabScreen,{label:"Profil",children:(0,R.jsx)(Ie,{route:ft(ft({},t),{},{params:{supplier:x}}),navigation:n,editable:!0})})]}),(0,R.jsx)(k.default,{mode:"outlined",onPress:function(){return n.popToTop()||y(x)},children:"Logga ut"})]})};const gt=function(e){var t=e.name,n=e.focused,r=(0,ue.useTheme)();return(0,R.jsx)(Te.default,{name:t,color:n?r.colors.primary:r.colors.iconInactive,size:20})};var mt=n(3122);function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const vt=function(e){var t=e.label,n=e.value,r=e.keyboardType,a=e.disabled,i=e.multiline,l=e.numberOfLines,o=e.styles,s=e.placeholder,u=e.outlined,d=e.onChange,c=(0,ue.useTheme)();return(0,R.jsx)(mt.default,{theme:jt(jt({},c),{},{colors:jt(jt({},c.colors),{},{background:"#FFFFFF"}),roundness:0}),style:jt({backgroundColor:"white"},o),keyboardType:r,label:t,value:n,onChangeText:d,disabled:a,placeholder:s,multiline:i,numberOfLines:l,mode:void 0!=u||u?"outlined":"flat"})};var bt=n(399);function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const kt=function(e){var t=e.label,n=e.value,r=e.values,a=e.multiSelect,l=e.setValue,o=(0,i.useState)(!1),s=(0,g.default)(o,2),u=s[0],d=s[1],c=(0,ue.useTheme)();return(0,R.jsx)(bt.default,{theme:yt(yt({},c),{},{colors:yt(yt({},c.colors),{},{background:"#FFFFFF"})}),dropDownStyle:{width:"100%"},inputProps:{style:{backgroundColor:"#FFFFFF"}},label:t,value:n,setValue:l,list:r,visible:u,showDropDown:function(){return d(!0)},onDismiss:function(){return d(!1)},multiSelect:a})};var Ot=n(5781);function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const wt=function(e){var t=e.label,n=e.value,r=e.onChange,a=(0,ue.useTheme)();return(0,R.jsx)(Ot.DatePickerInput,{theme:Pt(Pt({},a),{},{colors:Pt(Pt({},a.colors),{},{background:"#FFFFFF"})}),style:{backgroundColor:"#FFFFFF"},locale:"sv",label:t,value:n,onChange:r,inputMode:"start"})};function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dt=v.default.create({actionContainer:{flexDirection:"row",display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:20,paddingBottom:20,paddingTop:20}});const Ft=function(e){var t,n=e.route,r=e.navigation,a=(null==n||null==(t=n.params)||t.id,(0,i.useState)("")),l=(0,g.default)(a,2),o=l[0],s=l[1],u=(0,i.useState)(""),d=(0,g.default)(u,2),c=d[0],f=d[1],p=(0,i.useState)("1"),h=(0,g.default)(p,2),v=h[0],x=h[1],y=(0,i.useState)(""),O=(0,g.default)(y,2),S=O[0],P=O[1],w=(0,i.useState)(new Date),C=(0,g.default)(w,2),T=C[0],D=C[1],F=(0,i.useState)(new Date),E=(0,g.default)(F,2),B=E[0],L=E[1],I=(0,i.useState)(""),q=(0,g.default)(I,2),V=q[0],z=q[1],K=(0,i.useState)(""),M=(0,g.default)(K,2),N=M[0],_=M[1],W=ne(),H=(0,g.default)(W,3)[2],U=A().user;(0,i.useEffect)((function(){r.setOptions({headerRight:function(){return(0,R.jsx)(k.default,{onPress:function(){return G({title:o,price:c,volume:v,user:U})},children:"Publicera"})}})}),[o,c,v,U]);var G=function(e){var t=e.title,n=e.price,a=e.volume,i=e.user;console.log("title",t),console.log("price",n),console.log("volume",a);var l={id:0,product:{name:t},price:{SEK:+n,SEK_per_Kg:+n/+a,kilos:+a},volume:+a,supplier:Tt(Tt({},i),{},{artNo:""}),commodity:{area:"Other",mainGroup:"Other",group:"Other"},certifications:{organic:!1,MSC:!1,kravMarked:!1,ethical:!1,fairtrade:!1,locallyProduced:!1},origin:{productManufacturingCountry:"Sverige",rawMaterialOriginCountry:"Sverige"}};console.log("deal",l),H(l),r.navigate("ListDeals")};return(0,R.jsx)(j.default,{children:(0,R.jsx)(ge.default,{children:(0,R.jsxs)(b.default,{children:[(0,R.jsx)(vt,{label:"Namn p\xe5 vara",value:o,placeholder:'t ex "\xc4pplen"',onChange:function(e){return s(e)}}),(0,R.jsx)(vt,{keyboardType:"numeric",label:"Volym eller vikt (i kg/liter)",value:v,placeholder:"t ex 10 eller 5",onChange:function(e){return x(e)}}),(0,R.jsx)(vt,{keyboardType:"numeric",label:"Pris i SEK",placeholder:"tex 20 eller 10",value:c,onChange:function(e){return f(e)}}),(0,R.jsx)(wt,{label:"Sista datum f\xf6r erbjudande",value:B,onChange:function(e){e&&L(e)}}),(0,R.jsx)(kt,{label:"Ev datumbegr\xe4nsning",value:S,setValue:P,values:[{label:"B\xe4st f\xf6re",value:"0"},{label:"Sista f\xf6rbrukningsdag",value:"1"}]}),S&&(0,R.jsx)(wt,{label:"0"==S?"B\xe4st f\xf6re":"Sista f\xf6rbrukningsdag",value:T,onChange:function(e){e&&D(e)}}),(0,R.jsx)(m.default,{style:Tt(Tt({},Dt.actionContainer),{},{justifyContent:"flex-start",backgroundColor:"#FFFFFF"}),children:(0,R.jsx)(k.default,{icon:"camera",mode:"contained",uppercase:!1,children:"L\xe4gg till bild"})}),(0,R.jsx)(vt,{label:"Kort beskrivning",value:V,placeholder:'t ex "Ekologiskt, ursprung Sverige"',onChange:function(e){return z(e)}}),(0,R.jsx)(vt,{label:"\xd6vrigt",value:N,onChange:function(e){return _(e)}}),(0,R.jsx)(m.default,{style:Dt.actionContainer,children:(0,R.jsx)(k.default,{onPress:function(){r.navigate("ListDeals")},uppercase:!1,children:"Rensa utkast"})})]})})})};var Et=n(9570),Rt=n(4637),Bt=v.default.create({checkbox:{},checkboxContainer:{flexDirection:"row"}});const Lt=function(e){var t=e.checkedByDefault,n=e.text,r=e.onChange,a=(0,i.useState)(t),l=(0,g.default)(a,2),o=l[0],s=l[1],u=(0,ue.useTheme)();return(0,R.jsxs)(m.default,{style:Bt.checkboxContainer,children:[(0,R.jsx)(ce.default,{status:o?"checked":"unchecked",onPress:function(){r(!o),s(!o)},color:u.colors.primary}),(0,R.jsx)(Rt.default,{onPress:function(){r(!o),s(!o)},children:(0,R.jsx)($.default,{style:{paddingTop:10},children:n})})]})};var It=n(7385);function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vt=v.default.create({container:{paddingLeft:10,paddingRight:10,paddingBottom:10,paddingTop:10},text:{paddingTop:5},divider:{borderColor:"#D8D6CE",borderWidth:.5,marginTop:20,marginBottom:10},surface:{backgroundColor:"#FFFFFF"}});const zt=function(e){var t,n,r,l,o,s,u=e.navigation,d=e.route,c=(0,i.useState)(Array),f=(0,g.default)(c,2),p=f[0],h=f[1],v=(0,i.useState)(Array),b=(0,g.default)(v,2),x=b[0],y=b[1],S=V().user,P=He(),w=(0,g.default)(P,4),C=w[2],T=w[3],D=(0,i.useState)(""),F=(0,g.default)(D,2),E=F[0],B=F[1],L=(0,i.useState)(""),I=(0,g.default)(L,2),q=I[0],A=I[1],z=(0,i.useState)({}),K=(0,g.default)(z,2),M=K[0],N=K[1],_=null==(t=d.params)?void 0:t.tenderRequest;(0,i.useEffect)((function(){N({qualificationCriteriasMet:x,optionalCriteriasMet:x,price:{SEK:+E},other:q,tenderRequestId:_.id,approved:!1,submissionDate:new Date,supplier:S,buyer:_.buyer,id:It.default.v4()})}),[p,x,E,q,_,S]),(0,i.useEffect)((function(){T()}),[_]),(0,i.useLayoutEffect)((function(){u.setOptions({headerRight:function(){return(0,R.jsx)(k.default,{onPress:function(){return W(M)},children:"Skicka"})}})}),[M]);var W=function(e){if(!_.id)return console.error("no tenderRequest.id");console.log("publish offer",e),C(e),u.navigate("TenderRequest",{tenderRequest:_})};return(0,R.jsx)(j.default,{children:(0,R.jsx)(ge.default,{children:(0,R.jsxs)(a.ScrollView,{children:[(0,R.jsxs)(m.default,{style:Vt.container,children:[(0,R.jsx)(se.default,{children:_.title}),(0,R.jsxs)($.default,{style:Vt.text,children:[_.volume," kg"]}),(0,R.jsx)(Ce.default,{style:Vt.divider}),(0,R.jsxs)($.default,{style:Vt.text,children:["Sista svar:"," ",null==(n=_.lastOfferDate)?void 0:n.toString().split("T")[0]]}),(0,R.jsxs)($.default,{style:Vt.text,children:["Tilldelning senast:"," ",null==(r=_.lastAwardDate)?void 0:r.toString().split("T")[0]]}),(0,R.jsxs)($.default,{style:Vt.text,children:["Leveransplan: ",_.deliveryPlan]}),(0,R.jsxs)($.default,{style:Vt.text,children:["Leverans startdatum:"," ",null==(l=_.deliveryStartDate)?void 0:l.toString().split("T")[0]]}),(0,R.jsx)(O.default,{style:Vt.text,children:"Villkor"}),(0,R.jsx)($.default,{style:Vt.text,children:"Producent ansvarar f\xf6r leverans enligt \xf6verenskommelse."}),(0,R.jsx)(Ce.default,{style:Vt.divider}),(0,R.jsx)(O.default,{style:Vt.text,children:"Urval"}),(0,R.jsx)($.default,{style:Vt.text,children:"Inl\xe4mnade anbud som uppfyller krav rangordnas efter offererat pris. Uppfyllda \xf6nskem\xe5l ger prisavdrag vid rangordning av anbud."})]}),(0,R.jsx)(Et.default,{style:Vt.surface,children:(0,R.jsxs)(m.default,{style:Vt.container,children:[(0,R.jsx)(O.default,{children:"Krav"}),null==(o=_.qualificationCriteria)?void 0:o.map((function(e,t){return(0,R.jsx)(Lt,{text:e,checkedByDefault:!1,onChange:function(t){var n=p.filter((function(t){return t!=e}));t&&n.push(e),h(n)}},t)})),(0,R.jsx)(O.default,{children:"\xd6nskem\xe5l"}),null==(s=_.optionalCriteria)?void 0:s.map((function(e,t){return(0,R.jsx)(Lt,{text:e,checkedByDefault:!1,onChange:function(t){var n=x.filter((function(t){return t!=e}));t&&n.push(e),y(n)}},t)})),(0,R.jsx)(O.default,{children:"Offererat pris"}),(0,R.jsx)(vt,{label:"Pris i kr",value:E,keyboardType:"numeric",outlined:!0,styles:{width:300,marginBottom:10},onChange:function(e){return B(e)}}),(0,R.jsx)(O.default,{children:"\xd6vrigt"}),(0,R.jsx)(vt,{label:"Eventuell ytterligare information",value:q,outlined:!0,styles:{width:300},onChange:function(e){return A(e)}})]})}),(0,R.jsxs)(m.default,{style:At(At({},Vt.container),{},{flexDirection:"row",display:"flex",alignItems:"center",justifyContent:"center",paddingTop:20,paddingBottom:20}),children:[(0,R.jsx)(k.default,{onPress:function(){},uppercase:!1,children:"Spara utkast"}),(0,R.jsx)(k.default,{onPress:function(){return W(M)},mode:"contained",uppercase:!1,children:"Publicera"})]})]})})})};var Kt=function(){var e=(0,H.default)();return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(e.Navigator,{children:[(0,R.jsxs)(e.Group,{children:[(0,R.jsx)(e.Screen,{name:"ListDeals",options:function(e){var t=e.navigation;return{headerRight:function(){return(0,R.jsx)(Le.default,{icon:"bell",size:18,onPress:function(){return t.navigate("Notifications")}})},title:"Erbjudanden"}},component:ie}),(0,R.jsx)(e.Screen,{name:"Deal",options:{title:"Erbjudande"},component:Pe}),(0,R.jsx)(e.Screen,{name:"CreateDeal",options:{title:"Erbjud vara"},component:Ft})]}),(0,R.jsx)(e.Group,{screenOptions:{presentation:"modal"},children:(0,R.jsx)(e.Screen,{name:"Notifications",component:at})})]})})},Mt=function(){var e=(0,H.default)();return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(e.Navigator,{children:[(0,R.jsx)(e.Screen,{name:"ListTenderRequests",options:{title:"F\xf6rfr\xe5gningar"},component:_e}),(0,R.jsx)(e.Screen,{name:"TenderRequest",options:{title:"F\xf6rfr\xe5gan"},component:Ze}),(0,R.jsx)(e.Screen,{name:"CreateOffer",options:{title:"L\xe4mna anbud"},component:zt})]})})},Nt=function(){var e=(0,H.default)();return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(e.Navigator,{children:[(0,R.jsx)(e.Screen,{name:"SupplierProfile",options:function(e){var t=e.navigation;return{title:"Producent",headerRight:function(){return(0,R.jsx)(Le.default,{icon:"bell",size:18,onPress:function(){return t.navigate("Notifications")}})}}},component:pt}),(0,R.jsx)(e.Screen,{name:"Notifications",component:at})]})})};const _t=function(){var e=(0,ue.useTheme)(),t=(0,U.default)();return(0,R.jsxs)(t.Navigator,{activeColor:e.colors.primary,inactiveColor:e.colors.iconInactive,barStyle:{backgroundColor:e.colors.background},theme:e,initialRouteName:"TenderRequests",children:[(0,R.jsx)(t.Screen,{name:"TenderRequests",component:Mt,options:{tabBarLabel:"F\xf6rfr\xe5gningar",tabBarAccessibilityLabel:"F\xf6rfr\xe5gningar",tabBarIcon:function(e){var t=e.focused;return(0,R.jsx)(gt,{name:"cart",focused:t})}}}),(0,R.jsx)(t.Screen,{name:"Deals",component:Kt,options:{tabBarLabel:"Erbjudanden",tabBarAccessibilityLabel:"Erbjudanden",tabBarIcon:function(e){var t=e.focused;return(0,R.jsx)(gt,{name:"corn",focused:t})}}}),(0,R.jsx)(t.Screen,{name:"Explore",component:ze,options:{tabBarLabel:"Uppt\xe4ck",tabBarAccessibilityLabel:"Uppt\xe4ck",tabBarIcon:function(e){var t=e.focused;return(0,R.jsx)(gt,{name:"compass",focused:t})}}}),(0,R.jsx)(t.Screen,{name:"Profile",component:Nt,options:{tabBarLabel:"Mina sidor",tabBarAccessibilityLabel:"Mina sidor",tabBarIcon:function(e){var t=e.focused;return(0,R.jsx)(gt,{name:"account",focused:t})}}})]})};function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ut=function(e){var t=e.route,n=e.navigation,r=(0,ue.useTheme)(),l=V(),o=l.user,s=l.logout,u=Me(),d=(0,g.default)(u,4),c=d[0],f=d[3],p=He(),h=(0,g.default)(p,4),j=h[0],v=h[3],b=(0,i.useState)(!0),x=(0,g.default)(b,2),y=x[0],S=x[1],P=(0,i.useState)(!0),w=(0,g.default)(P,2);w[0],w[1];(0,i.useEffect)((function(){f(),v({buyer:o})}),[]);var C=c.filter((function(e){return e.buyer.id===(null==o?void 0:o.id)}));return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(m.default,{style:Ht({},Gt.header),children:[(0,R.jsx)(se.default,{children:"Mina sidor"}),(0,R.jsx)(O.default,{children:null==o?void 0:o.name})]}),(0,R.jsxs)(fe.Tabs,{uppercase:!1,style:{backgroundColor:"#D8F5E3"},theme:r,children:[(0,R.jsx)(fe.TabScreen,{label:"Aktuellt",children:(0,R.jsx)(a.ScrollView,{children:(0,R.jsxs)(J.default,{title:"Anbudsf\xf6rfr\xe5gningar",expanded:y,onPress:function(){return S((function(e){return!e}))},children:[0===C.length&&(0,R.jsx)(G.default.Title,{style:Gt.infoCard,title:"Inga anbudsf\xf6rfr\xe5gningar",subtitle:"Skapa en ny f\xf6rfr\xe5gan f\xf6r att f\xe5 anbud fr\xe5n leverant\xf6rer."})||(0,R.jsx)(X.default,{children:"Publicerade"}),C.map((function(e){return(0,R.jsx)(ut,{user:o,tenderRequest:e,navigation:n},e.id)}))]})})}),(0,R.jsx)(fe.TabScreen,{label:"Anbud",children:(0,R.jsxs)(a.ScrollView,{children:[(0,R.jsx)(J.default,{title:"P\xe5g\xe5ende",expanded:!0,children:C.filter((function(e){return j.filter((function(e){return!e.approved})).some((function(t){return t.tenderRequestId===e.id}))})).map((function(e){return(0,R.jsx)(ut,{user:o,tenderRequest:e,navigation:n},e.id)}))}),(0,R.jsx)(Ce.default,{}),(0,R.jsx)(J.default,{title:"Avslutade",expanded:!0,children:C.filter((function(e){return j.filter((function(e){return e.approved})).some((function(t){return t.tenderRequestId===e.id}))})).map((function(e){return(0,R.jsx)(ut,{user:o,tenderRequest:e,navigation:n},e.id)}))})]})}),(0,R.jsx)(fe.TabScreen,{label:"Profil",children:(0,R.jsx)(Ae,{route:Ht(Ht({},t),{},{params:{buyer:o}}),navigation:n,editable:!0})})]}),(0,R.jsx)(k.default,{mode:"outlined",onPress:function(){n.popToTop(),o&&s(o)},children:"Logga ut"})]})};var Gt=v.default.create({header:{margin:16},card:{margin:10,backgroundColor:"white"},infoCard:{marginTop:5,marginBottom:5}});const Yt=function(e){var t=e.navigation,n=e.route,r=(0,i.useState)(""),l=(0,g.default)(r,2),o=l[0],s=l[1],u=(0,i.useState)(""),d=(0,g.default)(u,2),c=d[0],f=d[1],p=(0,i.useState)(new Date),m=(0,g.default)(p,2),h=m[0],j=m[1],v=(0,i.useState)(new Date),b=(0,g.default)(v,2),x=b[0],y=b[1],O=(0,i.useState)(new Date),S=(0,g.default)(O,2),P=S[0],w=S[1],C=(0,i.useState)(""),T=(0,g.default)(C,2),D=T[0],F=T[1],E=(0,i.useState)(""),B=(0,g.default)(E,2),L=B[0],I=B[1],q=(0,i.useState)(""),A=(0,g.default)(q,2),z=A[0],K=A[1],M=(0,i.useState)(""),N=(0,g.default)(M,2),_=N[0],W=N[1],H=(0,i.useState)("Producent ansvarar f\xf6r leverans enligt \xf6verenskommelse."),U=(0,g.default)(H,1)[0],G=(0,i.useState)("Inl\xe4mnade anbud som uppfyller krav rangordnas efter offererat pris. Uppfyllda \xf6nskem\xe5l ger prisavdrag vid rangordning av anbud."),Y=(0,g.default)(G,1)[0],J=Me(),X=(0,g.default)(J,3)[2],Q=V().user,Z=[{label:"Veckovis",value:"0"},{label:"M\xe5nadsvis",value:"1"},{label:"Kvartalsvis",value:"2"},{label:"Endast en leverans",value:"3"}],$=[{label:"KRAV-certifierad",value:"0"},{label:"Ekologisk",value:"1"},{label:"Kvalitet klass 1",value:"2"},{label:"Studiebes\xf6k p\xe5 plats, 1h",value:"3"},{label:"Studiebes\xf6k p\xe5 plats, 2h",value:"4"},{label:"Studiebes\xf6k digitalt, 1h",value:"5"},{label:"Studiebes\xf6k digitalt, 2h",value:"6"}];(0,i.useEffect)((function(){var e,t;null!=(e=n.params)&&e.title&&s(null==(t=n.params)?void 0:t.title)}),[n.params]);var ee=function(e,t){return e.split(",").map((function(e){var n;return null==(n=t.find((function(t){return t.value==e})))?void 0:n.label})).filter((function(e){return e}))},te={title:o,volume:+c,lastOfferDate:h,lastAwardDate:x,buyer:Q,deliveryStartDate:P,deliveryPlan:ee(D,Z).pop(),volumePerDelivery:L,optionalCriteria:ee(_,$),qualificationCriteria:ee(z,$),terms:U,grading:Y};(0,i.useLayoutEffect)((function(){t.setOptions({headerRight:function(){return(0,R.jsx)(k.default,{onPress:function(){return ne(te)},children:"Publicera"})}})}),[te]);var ne=function(e){X(e),t.navigate("TenderRequests",{screen:"ListTenderRequests"})};return(0,R.jsx)(ge.default,{children:(0,R.jsxs)(a.ScrollView,{children:[(0,R.jsx)(vt,{label:"Namn p\xe5 vara",value:o,onChange:function(e){return s(e)}}),(0,R.jsx)(vt,{label:"Total volym",value:c,onChange:function(e){return f(e)}}),(0,R.jsx)(vt,{label:"Best\xe4llare",value:(null==Q?void 0:Q.name)+", "+(null==Q?void 0:Q.address)+", "+(null==Q?void 0:Q.zip)+" "+(null==Q?void 0:Q.postalAddress),disabled:!0}),(0,R.jsx)(wt,{label:"Sista anbud",value:h,onChange:function(e){e&&j(e)}}),(0,R.jsx)(wt,{label:"Tilldelning senast",value:x,onChange:function(e){e&&y(e)}}),(0,R.jsx)(wt,{label:"Leverans startdatum",value:P,onChange:function(e){e&&w(e)}}),(0,R.jsx)(kt,{label:"Leveransplan",value:D,setValue:F,values:Z}),(0,R.jsx)(vt,{label:"Volym per leverans",value:L,onChange:function(e){return I(e)}}),(0,R.jsx)(vt,{label:"Villkor",value:U,disabled:!0,multiline:!0,numberOfLines:2}),(0,R.jsx)(vt,{label:"Urval",value:Y,disabled:!0,multiline:!0,numberOfLines:3}),(0,R.jsx)(kt,{label:"Krav",value:z,setValue:K,values:$,multiSelect:!0}),(0,R.jsx)(kt,{label:"\xd6nskem\xe5l",value:_,setValue:W,values:$,multiSelect:!0})]})})};v.default.create({actionContainer:{flexDirection:"row",display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:20,paddingTop:20}});var Jt=n(2727),Xt=(0,H.default)(),Qt=function(){(0,Jt.useNavigation)();return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(Xt.Navigator,{children:[(0,R.jsx)(Xt.Screen,{name:"ListTenderRequests",options:{title:"F\xf6rfr\xe5gningar"},component:_e}),(0,R.jsx)(Xt.Screen,{name:"TenderRequest",options:{title:"F\xf6rfr\xe5gan"},component:Ze}),(0,R.jsx)(Xt.Screen,{name:"CreateTenderRequest",options:{title:"Anbudsf\xf6rfr\xe5gan"},component:Yt})]})})},Zt=function(){return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(Xt.Navigator,{children:[(0,R.jsxs)(Xt.Group,{children:[(0,R.jsx)(Xt.Screen,{name:"ListDeals",options:function(e){var t=e.navigation;return{headerRight:function(){return(0,R.jsx)(Le.default,{icon:"bell",size:18,onPress:function(){return t.navigate("Notifications")}})},title:"Erbjudanden"}},component:ie}),(0,R.jsx)(Xt.Screen,{name:"Deal",options:{title:"Erbjudande"},component:Pe})]}),(0,R.jsx)(Xt.Group,{screenOptions:{presentation:"modal"},children:(0,R.jsx)(Xt.Screen,{name:"Notifications",component:at})})]})})},$t=function(){var e=(0,H.default)();return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(e.Navigator,{children:[(0,R.jsx)(e.Screen,{name:"BuyerProfile",options:function(e){var t=e.navigation;return{title:"Kvarnbergsskolan",headerRight:function(){return(0,R.jsx)(Le.default,{icon:"bell",size:18,onPress:function(){return t.navigate("Notifications")}})}}},component:Ut}),(0,R.jsx)(e.Screen,{name:"Notifications",component:at})]})})};const en=function(){var e=(0,U.default)(),t=(0,ue.useTheme)();return(0,R.jsxs)(e.Navigator,{activeColor:t.colors.primary,inactiveColor:t.colors.iconInactive,barStyle:{backgroundColor:t.colors.background},theme:t,initialRouteName:"Deals",children:[(0,R.jsx)(e.Screen,{name:"Deals",component:Zt,options:{tabBarLabel:"Erbjudanden",tabBarAccessibilityLabel:"Erbjudanden",tabBarIcon:function(e){var t=e.focused;return(0,R.jsx)(gt,{name:"corn",focused:t})}}}),(0,R.jsx)(e.Screen,{name:"TenderRequests",component:Qt,options:{tabBarLabel:"F\xf6rfr\xe5gningar",tabBarAccessibilityLabel:"F\xf6rfr\xe5gningar",tabBarIcon:function(e){var t=e.focused;return(0,R.jsx)(gt,{name:"cart",focused:t})}}}),(0,R.jsx)(e.Screen,{name:"Explore",component:ze,options:{tabBarLabel:"Uppt\xe4ck",tabBarAccessibilityLabel:"Uppt\xe4ck",tabBarIcon:function(e){var t=e.focused;return(0,R.jsx)(gt,{name:"compass",focused:t})}}}),(0,R.jsx)(e.Screen,{name:"Profile",component:$t,options:{tabBarLabel:"Mina sidor",tabBarAccessibilityLabel:"Mina sidor",tabBarIcon:function(e){var t=e.focused;return(0,R.jsx)(gt,{name:"account",focused:t})}}})]})};const tn=function(){var e=(0,H.default)();return(0,R.jsxs)(e.Navigator,{initialRouteName:"Login",children:[(0,R.jsx)(e.Screen,{name:"Logga ut",options:{headerShown:!1},children:function(e){var t=e.navigation;return(0,R.jsx)(_,{onLogin:function(e){t.navigate(e.type)}})}}),(0,R.jsx)(e.Screen,{name:"supplier",options:{headerShown:!1},children:function(){return _t()}}),(0,R.jsx)(e.Screen,{name:"buyer",options:{headerShown:!1,title:"Tillbaka"},children:function(){return en()}})]})};var nn=n(5693),rn=n(6363),an=function(){var e=(0,i.useState)(!0),t=(0,g.default)(e,2),n=t[0],r=t[1],a=tt(),l=(0,g.default)(a,1)[0],o=(0,Jt.useNavigation)(),s=l.at(0);return(0,i.useEffect)((function(){console.log("notifications",l),new Date((null==s?void 0:s.data.date)||0).valueOf()>Date.now()-1e4&&r(!0)}),[s]),s&&(0,R.jsx)(rn.default,{visible:n,onDismiss:function(){return r(!1)},action:{label:"OK",onPress:function(){o.navigate("Notifications")}},children:s.title+": "+s.body})||null};function ln(){var e=(0,ue.useTheme)();return(0,R.jsx)(q,{children:(0,R.jsx)(L,{children:(0,R.jsx)(f.SafeAreaProvider,{children:(0,R.jsxs)(nn.default,{theme:e,children:[(0,R.jsx)(tn,{}),(0,R.jsx)(an,{})]})})})})}var on=n(3292);function sn(e){var t=e.children;return(0,R.jsx)(m.default,{style:un.container,children:(0,R.jsx)(m.default,{style:un.innerContainer,children:t})})}var un=v.default.create({container:{flex:1,backgroundColor:"#333",alignItems:"center",justifyContent:"center"},innerContainer:{position:"relative",width:375,maxWidth:"100vw",height:"90vh",maxHeight:"100vh",borderWidth:10,borderColor:"#555",borderStyle:"inset",borderRadius:40,overflow:"hidden",alignItems:"stretch",justifyContent:"center"}});function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fn=cn(cn({},u.MD2LightTheme),{},{roundness:4,colors:cn(cn({},u.MD2LightTheme.colors),{},{background:"#FAF7F0",surface:"#FAF7F0",surfaceVariant:"#EBFAEF",primary:"#1C3BA0",accent:"#EBFAEF",iconInactive:"#666259",secondary:"#FFFFFF",secondaryVariant:"#FFFFFF",text:"#1B1918",placeholder:"#1B1918"}),fonts:(0,d.default)({config:{web:{regular:{fontFamily:"Avenir",fontWeight:"normal"},medium:{fontFamily:"Avenir",fontWeight:600},light:{fontFamily:"Avenir",fontWeight:"light"},thin:{fontFamily:"Avenir",fontWeight:"thin"}},ios:{regular:{fontFamily:"sans-serif",fontWeight:"normal"},medium:{fontFamily:"sans-serif-medium",fontWeight:"normal"},light:{fontFamily:"sans-serif-light",fontWeight:"normal"},thin:{fontFamily:"sans-serif-thin",fontWeight:"normal"}},android:{regular:{fontFamily:"sans-serif",fontWeight:"normal"},medium:{fontFamily:"sans-serif-medium",fontWeight:"normal"},light:{fontFamily:"sans-serif-light",fontWeight:"normal"},thin:{fontFamily:"sans-serif-thin",fontWeight:"normal"}}}})});function pn(){return(0,R.jsx)(s.default,{theme:fn,children:"web"===o.default.OS?(0,R.jsx)(sn,{children:(0,R.jsx)(ln,{})}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(on.default,{}),(0,R.jsx)(ln,{})]})})}l.default.registerComponent(c.expo.name,(function(){return pn}))}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdO={},(()=>{var e=[];n.O=(t,r,a,i)=>{if(!r){var l=1/0;for(d=0;d<e.length;d++){for(var[r,a,i]=e[d],o=!0,s=0;s<r.length;s++)(!1&i||l>=i)&&Object.keys(n.O).every((e=>n.O[e](r[s])))?r.splice(s--,1):(o=!1,i<l&&(l=i));if(o){e.splice(d--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[r,a,i]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var l={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>l[e]=()=>r[e]));return l.default=()=>r,n.d(i,l),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,i,[l,o,s]=r,u=0;if(l.some((t=>0!==e[t]))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(s)var d=s(n)}for(t&&t(r);u<l.length;u++)i=l[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(d)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[762],(()=>n(9386)));r=n.O(r)})();
//# sourceMappingURL=main.dfc676bd.js.map